<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java注解 | notebook</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/notebook/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="学习笔记">
    <meta name="keywords" content="全栈学习笔记">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/notebook/assets/css/0.styles.306676b6.css" as="style"><link rel="preload" href="/notebook/assets/js/app.8978aa11.js" as="script"><link rel="preload" href="/notebook/assets/js/2.3295585a.js" as="script"><link rel="preload" href="/notebook/assets/js/43.5b698cbc.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.ad0dd013.js"><link rel="prefetch" href="/notebook/assets/js/100.18d762e6.js"><link rel="prefetch" href="/notebook/assets/js/101.df1643fc.js"><link rel="prefetch" href="/notebook/assets/js/102.711fb094.js"><link rel="prefetch" href="/notebook/assets/js/103.df90361a.js"><link rel="prefetch" href="/notebook/assets/js/104.91cc5537.js"><link rel="prefetch" href="/notebook/assets/js/105.5faf1761.js"><link rel="prefetch" href="/notebook/assets/js/106.d4373ca9.js"><link rel="prefetch" href="/notebook/assets/js/107.09e7e977.js"><link rel="prefetch" href="/notebook/assets/js/108.f879ec06.js"><link rel="prefetch" href="/notebook/assets/js/109.d73ab4a7.js"><link rel="prefetch" href="/notebook/assets/js/11.bb942f67.js"><link rel="prefetch" href="/notebook/assets/js/110.df1195c3.js"><link rel="prefetch" href="/notebook/assets/js/111.aad6f628.js"><link rel="prefetch" href="/notebook/assets/js/112.6608ef6c.js"><link rel="prefetch" href="/notebook/assets/js/113.b44d7a9d.js"><link rel="prefetch" href="/notebook/assets/js/114.32d718f1.js"><link rel="prefetch" href="/notebook/assets/js/115.fc120a9e.js"><link rel="prefetch" href="/notebook/assets/js/116.b59b2c90.js"><link rel="prefetch" href="/notebook/assets/js/117.e06a792c.js"><link rel="prefetch" href="/notebook/assets/js/118.81328820.js"><link rel="prefetch" href="/notebook/assets/js/119.8bd5b49e.js"><link rel="prefetch" href="/notebook/assets/js/12.0084f935.js"><link rel="prefetch" href="/notebook/assets/js/120.75e8278b.js"><link rel="prefetch" href="/notebook/assets/js/121.7645aa3b.js"><link rel="prefetch" href="/notebook/assets/js/122.12da3625.js"><link rel="prefetch" href="/notebook/assets/js/123.54772ef5.js"><link rel="prefetch" href="/notebook/assets/js/124.0f435a4e.js"><link rel="prefetch" href="/notebook/assets/js/125.49202e31.js"><link rel="prefetch" href="/notebook/assets/js/126.063c0dc0.js"><link rel="prefetch" href="/notebook/assets/js/127.10aef89a.js"><link rel="prefetch" href="/notebook/assets/js/128.a18fb938.js"><link rel="prefetch" href="/notebook/assets/js/129.52bd3fa2.js"><link rel="prefetch" href="/notebook/assets/js/13.1518aee3.js"><link rel="prefetch" href="/notebook/assets/js/130.94b09c35.js"><link rel="prefetch" href="/notebook/assets/js/131.8e8741cd.js"><link rel="prefetch" href="/notebook/assets/js/132.6039f04a.js"><link rel="prefetch" href="/notebook/assets/js/133.5d5a881e.js"><link rel="prefetch" href="/notebook/assets/js/134.13c96cab.js"><link rel="prefetch" href="/notebook/assets/js/135.84ff1026.js"><link rel="prefetch" href="/notebook/assets/js/136.5be2d64f.js"><link rel="prefetch" href="/notebook/assets/js/137.c13ade8c.js"><link rel="prefetch" href="/notebook/assets/js/138.245b4b27.js"><link rel="prefetch" href="/notebook/assets/js/139.c8ce5977.js"><link rel="prefetch" href="/notebook/assets/js/14.65893aa1.js"><link rel="prefetch" href="/notebook/assets/js/140.162d1bb5.js"><link rel="prefetch" href="/notebook/assets/js/141.f6f6fa8d.js"><link rel="prefetch" href="/notebook/assets/js/142.558f939a.js"><link rel="prefetch" href="/notebook/assets/js/143.bd02ec09.js"><link rel="prefetch" href="/notebook/assets/js/144.e23e68a5.js"><link rel="prefetch" href="/notebook/assets/js/145.ebbca7e4.js"><link rel="prefetch" href="/notebook/assets/js/146.e5c44244.js"><link rel="prefetch" href="/notebook/assets/js/147.9f7ccbfc.js"><link rel="prefetch" href="/notebook/assets/js/148.a367286f.js"><link rel="prefetch" href="/notebook/assets/js/149.04cfb13d.js"><link rel="prefetch" href="/notebook/assets/js/15.94d642c1.js"><link rel="prefetch" href="/notebook/assets/js/150.449a26e9.js"><link rel="prefetch" href="/notebook/assets/js/151.8fd3a27b.js"><link rel="prefetch" href="/notebook/assets/js/152.3b529668.js"><link rel="prefetch" href="/notebook/assets/js/153.fa86f4c0.js"><link rel="prefetch" href="/notebook/assets/js/154.60a24941.js"><link rel="prefetch" href="/notebook/assets/js/155.6d661985.js"><link rel="prefetch" href="/notebook/assets/js/156.b9cc9d16.js"><link rel="prefetch" href="/notebook/assets/js/157.418f5bf3.js"><link rel="prefetch" href="/notebook/assets/js/158.42495e4b.js"><link rel="prefetch" href="/notebook/assets/js/159.c42f7bdc.js"><link rel="prefetch" href="/notebook/assets/js/16.f82ad78e.js"><link rel="prefetch" href="/notebook/assets/js/160.063519a2.js"><link rel="prefetch" href="/notebook/assets/js/161.acf0704e.js"><link rel="prefetch" href="/notebook/assets/js/162.603af965.js"><link rel="prefetch" href="/notebook/assets/js/163.ae82d304.js"><link rel="prefetch" href="/notebook/assets/js/164.23ac592d.js"><link rel="prefetch" href="/notebook/assets/js/165.2b97d44b.js"><link rel="prefetch" href="/notebook/assets/js/166.2318947e.js"><link rel="prefetch" href="/notebook/assets/js/167.c379c56d.js"><link rel="prefetch" href="/notebook/assets/js/168.8d1a7c3a.js"><link rel="prefetch" href="/notebook/assets/js/169.1893572a.js"><link rel="prefetch" href="/notebook/assets/js/17.8ffa6c64.js"><link rel="prefetch" href="/notebook/assets/js/170.2b80b7bd.js"><link rel="prefetch" href="/notebook/assets/js/171.1e896c70.js"><link rel="prefetch" href="/notebook/assets/js/172.5f6aa7cb.js"><link rel="prefetch" href="/notebook/assets/js/173.ea3e6be3.js"><link rel="prefetch" href="/notebook/assets/js/174.2b42017e.js"><link rel="prefetch" href="/notebook/assets/js/175.612d3b13.js"><link rel="prefetch" href="/notebook/assets/js/176.bb131f2a.js"><link rel="prefetch" href="/notebook/assets/js/177.8ec26f15.js"><link rel="prefetch" href="/notebook/assets/js/178.a14f0a09.js"><link rel="prefetch" href="/notebook/assets/js/179.43bc8d77.js"><link rel="prefetch" href="/notebook/assets/js/18.72d19e8c.js"><link rel="prefetch" href="/notebook/assets/js/180.b86fc5fc.js"><link rel="prefetch" href="/notebook/assets/js/181.4682b920.js"><link rel="prefetch" href="/notebook/assets/js/182.d13f6ea1.js"><link rel="prefetch" href="/notebook/assets/js/183.15ae06b7.js"><link rel="prefetch" href="/notebook/assets/js/184.26601145.js"><link rel="prefetch" href="/notebook/assets/js/185.24f2484e.js"><link rel="prefetch" href="/notebook/assets/js/186.9c57a6bd.js"><link rel="prefetch" href="/notebook/assets/js/187.49c1ccaf.js"><link rel="prefetch" href="/notebook/assets/js/188.d36e089d.js"><link rel="prefetch" href="/notebook/assets/js/189.c9c05468.js"><link rel="prefetch" href="/notebook/assets/js/19.9fc8ebe6.js"><link rel="prefetch" href="/notebook/assets/js/190.a3bf651a.js"><link rel="prefetch" href="/notebook/assets/js/191.764e02c7.js"><link rel="prefetch" href="/notebook/assets/js/192.efbc422a.js"><link rel="prefetch" href="/notebook/assets/js/193.2378c3df.js"><link rel="prefetch" href="/notebook/assets/js/194.4c58d88b.js"><link rel="prefetch" href="/notebook/assets/js/195.badf2826.js"><link rel="prefetch" href="/notebook/assets/js/196.b8c6de79.js"><link rel="prefetch" href="/notebook/assets/js/197.d605bd64.js"><link rel="prefetch" href="/notebook/assets/js/198.7f351da5.js"><link rel="prefetch" href="/notebook/assets/js/199.18ac70dc.js"><link rel="prefetch" href="/notebook/assets/js/20.ae5f6787.js"><link rel="prefetch" href="/notebook/assets/js/200.4dc7a625.js"><link rel="prefetch" href="/notebook/assets/js/201.86bc1624.js"><link rel="prefetch" href="/notebook/assets/js/202.46f431ad.js"><link rel="prefetch" href="/notebook/assets/js/203.e422dce0.js"><link rel="prefetch" href="/notebook/assets/js/204.1e8ff98b.js"><link rel="prefetch" href="/notebook/assets/js/205.160f2d88.js"><link rel="prefetch" href="/notebook/assets/js/206.b8bb9eb0.js"><link rel="prefetch" href="/notebook/assets/js/207.2d979a2c.js"><link rel="prefetch" href="/notebook/assets/js/208.57c8bde5.js"><link rel="prefetch" href="/notebook/assets/js/209.34c6c965.js"><link rel="prefetch" href="/notebook/assets/js/21.4d8cf05c.js"><link rel="prefetch" href="/notebook/assets/js/210.5184efc3.js"><link rel="prefetch" href="/notebook/assets/js/211.27b3c43f.js"><link rel="prefetch" href="/notebook/assets/js/212.6ca80d46.js"><link rel="prefetch" href="/notebook/assets/js/213.006099ab.js"><link rel="prefetch" href="/notebook/assets/js/214.01d10125.js"><link rel="prefetch" href="/notebook/assets/js/215.fe553758.js"><link rel="prefetch" href="/notebook/assets/js/216.2451d652.js"><link rel="prefetch" href="/notebook/assets/js/217.10acfce9.js"><link rel="prefetch" href="/notebook/assets/js/22.8847f393.js"><link rel="prefetch" href="/notebook/assets/js/23.38076e6c.js"><link rel="prefetch" href="/notebook/assets/js/24.241b5ba4.js"><link rel="prefetch" href="/notebook/assets/js/25.d555f519.js"><link rel="prefetch" href="/notebook/assets/js/26.5e596b6c.js"><link rel="prefetch" href="/notebook/assets/js/27.2c4bffc6.js"><link rel="prefetch" href="/notebook/assets/js/28.bf68cc5f.js"><link rel="prefetch" href="/notebook/assets/js/29.1850bb08.js"><link rel="prefetch" href="/notebook/assets/js/3.ea1a4511.js"><link rel="prefetch" href="/notebook/assets/js/30.913c71ed.js"><link rel="prefetch" href="/notebook/assets/js/31.8c1368e4.js"><link rel="prefetch" href="/notebook/assets/js/32.ab4a79e6.js"><link rel="prefetch" href="/notebook/assets/js/33.67c2d1e1.js"><link rel="prefetch" href="/notebook/assets/js/34.8d4fe674.js"><link rel="prefetch" href="/notebook/assets/js/35.1dd47348.js"><link rel="prefetch" href="/notebook/assets/js/36.4f00b90e.js"><link rel="prefetch" href="/notebook/assets/js/37.f2f08452.js"><link rel="prefetch" href="/notebook/assets/js/38.85d5f4b1.js"><link rel="prefetch" href="/notebook/assets/js/39.68430cda.js"><link rel="prefetch" href="/notebook/assets/js/4.aa1f4d87.js"><link rel="prefetch" href="/notebook/assets/js/40.a5d1602d.js"><link rel="prefetch" href="/notebook/assets/js/41.f9003dd4.js"><link rel="prefetch" href="/notebook/assets/js/42.b9468304.js"><link rel="prefetch" href="/notebook/assets/js/44.5d66646e.js"><link rel="prefetch" href="/notebook/assets/js/45.d8c25634.js"><link rel="prefetch" href="/notebook/assets/js/46.3a29e957.js"><link rel="prefetch" href="/notebook/assets/js/47.10a47405.js"><link rel="prefetch" href="/notebook/assets/js/48.b7787ca9.js"><link rel="prefetch" href="/notebook/assets/js/49.a435f028.js"><link rel="prefetch" href="/notebook/assets/js/5.a042e532.js"><link rel="prefetch" href="/notebook/assets/js/50.377b1218.js"><link rel="prefetch" href="/notebook/assets/js/51.72238a50.js"><link rel="prefetch" href="/notebook/assets/js/52.d5eeb5ab.js"><link rel="prefetch" href="/notebook/assets/js/53.ad4d5c5e.js"><link rel="prefetch" href="/notebook/assets/js/54.fa68e4d3.js"><link rel="prefetch" href="/notebook/assets/js/55.6758b457.js"><link rel="prefetch" href="/notebook/assets/js/56.f1178984.js"><link rel="prefetch" href="/notebook/assets/js/57.49bfa3ec.js"><link rel="prefetch" href="/notebook/assets/js/58.25693284.js"><link rel="prefetch" href="/notebook/assets/js/59.355865a0.js"><link rel="prefetch" href="/notebook/assets/js/6.744ef3d9.js"><link rel="prefetch" href="/notebook/assets/js/60.3b04c778.js"><link rel="prefetch" href="/notebook/assets/js/61.5c730da5.js"><link rel="prefetch" href="/notebook/assets/js/62.293977a9.js"><link rel="prefetch" href="/notebook/assets/js/63.a1f7d522.js"><link rel="prefetch" href="/notebook/assets/js/64.698160c8.js"><link rel="prefetch" href="/notebook/assets/js/65.2d400d32.js"><link rel="prefetch" href="/notebook/assets/js/66.9e1d1088.js"><link rel="prefetch" href="/notebook/assets/js/67.0a49ac07.js"><link rel="prefetch" href="/notebook/assets/js/68.e278f8bd.js"><link rel="prefetch" href="/notebook/assets/js/69.9ae024f0.js"><link rel="prefetch" href="/notebook/assets/js/7.a8cc7006.js"><link rel="prefetch" href="/notebook/assets/js/70.ecc66a1b.js"><link rel="prefetch" href="/notebook/assets/js/71.6197564c.js"><link rel="prefetch" href="/notebook/assets/js/72.8a51c5a8.js"><link rel="prefetch" href="/notebook/assets/js/73.17b7fc55.js"><link rel="prefetch" href="/notebook/assets/js/74.51c25099.js"><link rel="prefetch" href="/notebook/assets/js/75.4e49385e.js"><link rel="prefetch" href="/notebook/assets/js/76.9b20af8b.js"><link rel="prefetch" href="/notebook/assets/js/77.62682a06.js"><link rel="prefetch" href="/notebook/assets/js/78.b3326b2e.js"><link rel="prefetch" href="/notebook/assets/js/79.69dde82f.js"><link rel="prefetch" href="/notebook/assets/js/8.d3830af8.js"><link rel="prefetch" href="/notebook/assets/js/80.d5950484.js"><link rel="prefetch" href="/notebook/assets/js/81.2dab3637.js"><link rel="prefetch" href="/notebook/assets/js/82.f4d136fc.js"><link rel="prefetch" href="/notebook/assets/js/83.c7d751a8.js"><link rel="prefetch" href="/notebook/assets/js/84.b2645137.js"><link rel="prefetch" href="/notebook/assets/js/85.02ecd4f2.js"><link rel="prefetch" href="/notebook/assets/js/86.6d6d39be.js"><link rel="prefetch" href="/notebook/assets/js/87.dfdc8e09.js"><link rel="prefetch" href="/notebook/assets/js/88.4d5bde3b.js"><link rel="prefetch" href="/notebook/assets/js/89.5b14e392.js"><link rel="prefetch" href="/notebook/assets/js/9.799b4b95.js"><link rel="prefetch" href="/notebook/assets/js/90.c16fd700.js"><link rel="prefetch" href="/notebook/assets/js/91.23c01f88.js"><link rel="prefetch" href="/notebook/assets/js/92.e7a0e511.js"><link rel="prefetch" href="/notebook/assets/js/93.0616815a.js"><link rel="prefetch" href="/notebook/assets/js/94.1cfba720.js"><link rel="prefetch" href="/notebook/assets/js/95.cd76aaad.js"><link rel="prefetch" href="/notebook/assets/js/96.44646498.js"><link rel="prefetch" href="/notebook/assets/js/97.9e696d9d.js"><link rel="prefetch" href="/notebook/assets/js/98.e9f8b933.js"><link rel="prefetch" href="/notebook/assets/js/99.95e727c2.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.306676b6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><img src="/notebook/img/logo.jpg" alt="notebook" class="logo"> <span class="site-name can-hide">notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/Vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><!----> <span class="title" style="display:;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/java/javaSE/" class="nav-link">javaSE</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/maven/" class="nav-link">maven</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringSecurity/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DesignPattern/" class="nav-link">DesignPattern</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DevelopAndReading/" class="nav-link">开发与阅读</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><!----> <span class="title" style="display:;">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/python/pythonFundamentals/" class="nav-link">pythonFundamentals</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/fastAPI/" class="nav-link">fastAPI</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/Flask/" class="nav-link">Flask</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/spider/" class="nav-link">爬虫</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/docker/" class="nav-link">docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库与中间件" class="dropdown-title"><!----> <span class="title" style="display:;">数据库与中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/database/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Elatisearch/" class="nav-link">Elatisearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/foundation/Leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/network/" class="nav-link">计算机网络</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/%E4%BE%A7%E8%BE%B9%E6%A0%8F.jpeg"> <div class="blogger-info"><h3>学习笔记</h3> <span>每个小菜鸡都有变强的梦想</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/Vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><!----> <span class="title" style="display:;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/java/javaSE/" class="nav-link">javaSE</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/maven/" class="nav-link">maven</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringSecurity/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DesignPattern/" class="nav-link">DesignPattern</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DevelopAndReading/" class="nav-link">开发与阅读</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><!----> <span class="title" style="display:;">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/python/pythonFundamentals/" class="nav-link">pythonFundamentals</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/fastAPI/" class="nav-link">fastAPI</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/Flask/" class="nav-link">Flask</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/spider/" class="nav-link">爬虫</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/docker/" class="nav-link">docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库与中间件" class="dropdown-title"><!----> <span class="title" style="display:;">数据库与中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/database/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Elatisearch/" class="nav-link">Elatisearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/foundation/Leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/network/" class="nav-link">计算机网络</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javaSE</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/pages/6a64c4/" class="sidebar-link">Serializable接口</a></li><li><a href="/notebook/pages/87d176/" class="sidebar-link">ThreadLocal初识</a></li><li><a href="/notebook/pages/22a8c8/" class="sidebar-link">Optional — 什么是NPE  如何处理万恶的NPE</a></li><li><a href="/notebook/pages/29bccf/" class="sidebar-link">java集合常用的API</a></li><li><a href="/notebook/pages/a09542/" class="sidebar-link">Comparator</a></li><li><a href="/notebook/pages/c8f986/" class="sidebar-link">Java集合框架Ⅱ</a></li><li><a href="/notebook/pages/bd7716/" class="sidebar-link">Java反射</a></li><li><a href="/notebook/pages/76f0cc/" aria-current="page" class="active sidebar-link">Java注解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/notebook/pages/76f0cc/#注解初识" class="sidebar-link">注解初识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/76f0cc/#元注解" class="sidebar-link">元注解</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/76f0cc/#如何定义annotation" class="sidebar-link">如何定义Annotation</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/76f0cc/#使用注解" class="sidebar-link">使用注解</a></li></ul></li></ul></li><li><a href="/notebook/pages/e69783/" class="sidebar-link">Java泛型</a></li><li><a href="/notebook/pages/96d772/" class="sidebar-link">IO初识</a></li><li><a href="/notebook/pages/d820bd/" class="sidebar-link">Java数据类型</a></li><li><a href="/notebook/pages/9353ce/" class="sidebar-link">Java 基础01</a></li><li><a href="/notebook/pages/6ff13b/" class="sidebar-link">equals 和 hashcode</a></li><li><a href="/notebook/pages/5514c0/" class="sidebar-link">Java面试题</a></li><li><a href="/notebook/pages/0589be/" class="sidebar-link">Java基础01</a></li><li><a href="/notebook/pages/e1ae95/" class="sidebar-link">Java基础02</a></li><li><a href="/notebook/pages/39f569/" class="sidebar-link">Java基础03</a></li><li><a href="/notebook/pages/51e970/" class="sidebar-link">位运算</a></li><li><a href="/notebook/pages/7dde26/" class="sidebar-link">Java集合01</a></li><li><a href="/notebook/pages/5810b0/" class="sidebar-link">Java集合02</a></li><li><a href="/notebook/pages/e12459/" class="sidebar-link">ArrayList源码分析</a></li><li><a href="/notebook/pages/40754b/" class="sidebar-link">LinkedList源码分析</a></li><li><a href="/notebook/pages/b6b8f0/" class="sidebar-link">HashMap 源码分析</a></li><li><a href="/notebook/pages/29db62/" class="sidebar-link">并发01</a></li><li><a href="/notebook/pages/4eb317/" class="sidebar-link">并发02</a></li><li><a href="/notebook/pages/05a494/" class="sidebar-link">并发03</a></li><li><a href="/notebook/pages/047a05/" class="sidebar-link">IO基础</a></li><li><a href="/notebook/pages/ef1a54/" class="sidebar-link">基本的IO模型</a></li><li><a href="/notebook/pages/ab5c9f/" class="sidebar-link">NIO</a></li><li><a href="/notebook/pages/6096ee/" class="sidebar-link">Java多线程</a></li><li><a href="/notebook/pages/68870a/" class="sidebar-link">JVM</a></li><li><a href="/notebook/pages/c940e0/" class="sidebar-link">bigdecimal</a></li><li><a href="/notebook/pages/ba533f/" class="sidebar-link">代理对象</a></li><li><a href="/notebook/pages/4c4dc8/" class="sidebar-link">serialization序列化</a></li><li><a href="/notebook/pages/ada53c/" class="sidebar-link">spi服务提供者接口</a></li><li><a href="/notebook/pages/214069/" class="sidebar-link">语法糖</a></li><li><a href="/notebook/pages/d921ba/" class="sidebar-link">Java中只有值传递</a></li><li><a href="/notebook/pages/baaf76/" class="sidebar-link">LinkedHashMap源码分析</a></li><li><a href="/notebook/pages/eacb25/" class="sidebar-link">ConcurrentHashMap源码分析</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringCloud</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringSecurity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DesignPattern</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发与阅读</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/notebook/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/notebook/categories/?category=java" title="分类" data-v-06225672>java</a></li><li data-v-06225672><a href="/notebook/categories/?category=javaSE" title="分类" data-v-06225672>javaSE</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/progressforeverever" target="_blank" title="作者" class="beLink" data-v-06225672>czy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-11-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Java注解<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="java注解"><a href="#java注解" class="header-anchor">#</a> Java注解</h1> <h2 id="注解初识"><a href="#注解初识" class="header-anchor">#</a> 注解初识</h2> <p>什么是注解（Annotation）？注解是放在Java源码的类、方法、字段、参数前的一种特殊标签，先当与贴个标签，让他具有某种功能。</p> <p>Java的注解可以分为三类：</p> <ul><li><p>第一类是由<strong>编译器使用的注解</strong>，例如：</p> <ul><li><code>@Override</code>：让编译器检查该方法是否正确地实现了覆写；</li> <li><code>@SuppressWarnings</code>：告诉编译器忽略此处代码产生的警告。</li></ul> <p>这类<strong>注解不会被编译进入<code>.class</code>文件</strong>，它们在编译后就被编译器扔掉了。</p></li> <li><p>第二类是由工具处理<code>.class</code>文件使用的注解，比如有些工具会在加载class的时候，**对class做动态修改，实现一些特殊的功能。这类注解会被编译进入<code>.class</code>文件，但加载结束后并不会存在于内存中。**这类注解只被一些底层库使用，一般我们不必自己处理。</p></li> <li><p>第三类是在<strong>程序运行期能够读取的注解</strong>，它们在加载后一直存在于JVM中，这也是最常用的注解。例如，一个配置了<code>@PostConstruct</code>的方法会在调用构造方法后自动被调用（这是Java代码读取该注解实现的功能，JVM并不会识别该注解）。</p></li></ul> <p><strong>注解的配置参数</strong>可以有**默认值，**缺少某个配置参数时将使用默认值。</p> <p>此外，大部分注解会有一个名为<code>value</code>的配置参数，对此参数赋值，可以只写常量，相当于省略了value参数。</p> <p>如果只写注解，相当于全部使用默认值。</p> <p>定义注解</p> <p>ava语言使用<code>@interface</code>语法来定义注解（<code>Annotation</code>），它的格式如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注解的参数类似无参数方法，可以用<code>default</code>设定一个默认值（强烈推荐）。最常用的参数应当命名为<code>value</code>。</p> <h3 id="元注解"><a href="#元注解" class="header-anchor">#</a> 元注解</h3> <p><strong>有一些注解可以修饰其他注解</strong>，这些注解就称为元注解（meta annotation）。Java标准库已经定义了一些元注解，我们只需要使用元注解，通常不需要自己去编写元注解。</p> <h4 id="target"><a href="#target" class="header-anchor">#</a> @Target</h4> <p>最常用的元注解是<code>@Target</code>。<strong>使用<code>@Target</code>可以定义<code>Annotation</code>能够被应用于源码的哪些位置</strong>：</p> <ul><li><strong>类或接口：<code>ElementType.TYPE</code></strong>；</li> <li>字段：<code>ElementType.FIELD</code>；</li> <li>方法：<code>ElementType.METHOD</code>；</li> <li>构造方法：<code>ElementType.CONSTRUCTOR</code>；</li> <li>方法参数：<code>ElementType.PARAMETER</code>。</li></ul> <p>例如，定义注解<code>@Report</code>可用在方法上，我们必须添加一个<code>@Target(ElementType.METHOD)</code>：</p> <h4 id="retention"><a href="#retention" class="header-anchor">#</a> @Retention</h4> <p>另一个重要的元注解<code>@Retention</code>定义了<code>Annotation</code>的生命周期：</p> <ul><li>仅编译期：<code>RetentionPolicy.SOURCE</code>；</li> <li>仅class文件：<code>RetentionPolicy.CLASS</code>；</li> <li>运行期：<code>RetentionPolicy.RUNTIME</code>。</li></ul> <p>如果<code>@Retention</code>不存在，则该<code>Annotation</code>默认为<code>CLASS</code>。因为通常我们自定义的<code>Annotation</code>都是<code>RUNTIME</code>，所以，务必要加上<code>@Retention(RetentionPolicy.RUNTIME)</code>这个元注解：</p> <h4 id="repeatable"><a href="#repeatable" class="header-anchor">#</a> @Repeatable</h4> <p>使用<code>@Repeatable</code>这个元注解可以定义<code>Annotation</code>是否可重复。这个注解应用不是特别广泛。</p> <h4 id="inherited"><a href="#inherited" class="header-anchor">#</a> @Inherited</h4> <p>使用<code>@Inherited</code>定义子类是否可继承父类定义的<code>Annotation</code>。<strong><code>@Inherited</code>仅针对<code>@Target(ElementType.TYPE)</code>类型的<code>annotation</code>有效，并且仅针对<code>class</code>的继承，对<code>interface</code>的继承无效</strong>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="如何定义annotation"><a href="#如何定义annotation" class="header-anchor">#</a> 如何定义Annotation</h3> <p>我们总结一下定义<code>Annotation</code>的步骤：</p> <p>第一步，用<code>@interface</code>定义注解：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二步，添加参数、默认值：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>把最常用的参数定义为<code>value()</code>，推荐所有参数都尽量设置默认值。</p> <p>第三步，用元注解配置注解：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其中，必须设置<code>@Target</code>和<code>@Retention</code>，<code>@Retention</code>一般设置为<code>RUNTIME</code>，因为我们自定义的注解通常要求在运行期读取。一般情况下，不必写<code>@Inherited</code>和<code>@Repeatable</code>。</p> <h3 id="使用注解"><a href="#使用注解" class="header-anchor">#</a> 使用注解</h3> <p>Java的注解本身对代码逻辑没有任何影响。根据<code>@Retention</code>的配置：</p> <ul><li><code>SOURCE</code>类型的注解在编译期就被丢掉了；</li> <li><code>CLASS</code>类型的注解仅保存在class文件中，它们不会被加载进JVM；</li> <li><code>RUNTIME</code>类型的注解会被加载进JVM，并且在运行期可以被程序读取。</li></ul> <p>如何使用注解完全由工具决定。<code>SOURCE</code>类型的注解主要由编译器使用，因此我们一般只使用，不编写。<code>CLASS</code>类型的注解主要由底层工具库使用，涉及到class的加载，一般我们很少用到。只有<code>RUNTIME</code>类型的注解不但要使用，还经常需要编写。</p> <p>因此，我们只讨论如何读取<code>RUNTIME</code>类型的注解。</p> <p><strong>因为注解定义后也是一种<code>class</code></strong>，所有的注解都继承自<code>java.lang.annotation.Annotation</code>，<strong>因此，读取注解，需要使用反射API。</strong></p> <p>Java提供的使用反射API读取<code>Annotation</code>的方法包括：</p> <p>判断某个注解是否存在于<code>Class</code>、<code>Field</code>、<code>Method</code>或<code>Constructor</code>：</p> <ul><li><code>Class.isAnnotationPresent(Class)</code></li> <li><code>Field.isAnnotationPresent(Class)</code></li> <li><code>Method.isAnnotationPresent(Class)</code></li> <li><code>Constructor.isAnnotationPresent(Class)</code></li></ul> <p>例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取Person定义的@Report注解:</span>
<span class="token class-name">Report</span> report <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Report</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> type <span class="token operator">=</span> report<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> level <span class="token operator">=</span> report<span class="token punctuation">.</span><span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用反射API读取<code>Annotation</code>有两种方法。方法一是先判断<code>Annotation</code>是否存在，如果存在，就直接读取：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Report</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Report</span> report <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Report</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>第二种方法是直接读取<code>Annotation</code>，如果<code>Annotation</code>不存在，将返回<code>null</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Report</span> report <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Report</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>report <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>定义了注解，本身对程序逻辑没有任何影响。我们必须自己编写代码来使用注解。</p> <p>读取方法、字段和构造方法的<code>Annotation</code>和Class类似。但要读取方法参数的<code>Annotation</code>就比较麻烦一点，因为方法参数本身可以看成一个数组，而每个参数又可以定义多个注解，所以，一次获取方法参数的所有注解就必须用一个二维数组来表示。例如，对于以下方法定义的注解：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void hello(@NotNull @Range(max=5) String name, @NotNull String prefix) {
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>要读取方法参数的注解，我们先用反射获取<code>Method</code>实例，然后读取方法参数的所有注解：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取Method实例:</span>
<span class="token class-name">Method</span> m <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// 获取所有参数的Annotation:</span>
<span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annos <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getParameterAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 第一个参数（索引为0）的所有Annotation:</span>
<span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annosOfName <span class="token operator">=</span> annos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Annotation</span> anno <span class="token operator">:</span> annosOfName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>anno <span class="token keyword">instanceof</span> <span class="token class-name">Range</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// @Range注解</span>
        r<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>anno <span class="token keyword">instanceof</span> <span class="token class-name">NotNull</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// @NotNull注解</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>注解如何使用，完全由程序自己决定。例如，JUnit是一个测试框架，它会自动运行所有标记为<code>@Test</code>的方法。</p> <p>我们来看一个<code>@Range</code>注解，我们希望用它来定义一个<code>String</code>字段的规则：字段长度满足<code>@Range</code>的参数定义：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Range</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">255</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在某个JavaBean中，我们可以使用该注解：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Range</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Range</span><span class="token punctuation">(</span>max<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>但是，定义了注解，本身对程序逻辑没有任何影响。我们必须自己编写代码来使用注解。这里，我们编写一个<code>Person</code>实例的检查方法，它可以检查<code>Person</code>实例的<code>String</code>字段长度是否满足<code>@Range</code>的定义：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">,</span> <span class="token class-name">ReflectiveOperationException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 遍历所有Field:</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> person<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取Field定义的@Range:</span>
        <span class="token class-name">Range</span> range <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果@Range存在:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>range <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获取Field的值:</span>
            <span class="token class-name">Object</span> value <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果值是String:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 判断值是否满足@Range的min/max:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> range<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> range<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid field: &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这样一来，我们通过<code>@Range</code>注解，<strong>配合<code>check()</code>方法，就可以完成<code>Person</code>实例的检查。注意检查逻辑完全是我们自己编写的，JVM不会自动给注解添加任何额外的逻辑。</strong></p> <p>当在实际开发中，自定义注解通常用于为代码添加元数据信息，实现配置、条件检查、简化代码等功能。举例来说，假设你在开发一个权限控制的系统，你可以利用自定义注解来标记哪些方法需要进行权限检查。</p> <p>以下是一个简单的示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 自定义注解</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@interface</span> <span class="token class-name">RequiresPermission</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用自定义注解</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequiresPermission</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performAdminTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 一些需要管理员权限的操作</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Performing admin task...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequiresPermission</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performUserTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 一些需要用户权限的操作</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Performing user task...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 一些普通操作</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Performing a general task...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DemoClass</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemoClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取方法对象</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 检查权限</span>
            <span class="token function">checkPermission</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;performAdminTask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">checkPermission</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;performUserTask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 不需要权限检查的方法</span>
            demo<span class="token punctuation">.</span><span class="token function">performTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 权限检查</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">checkPermission</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>Method</span> method<span class="token punctuation">,</span> <span class="token class-name">String</span> requiredPermission<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">RequiresPermission</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">RequiresPermission</span> annotation <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">RequiresPermission</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>annotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>requiredPermission<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SecurityException</span><span class="token punctuation">(</span><span class="token string">&quot;Insufficient permissions to access this method!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 如果权限匹配，执行操作</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果没有该注解，也执行操作</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p>在这个示例中，<code>RequiresPermission</code> 是一个自定义的注解，用于标记需要特定权限的方法。<code>DemoClass</code> 中的 <code>performAdminTask()</code> 和 <code>performUserTask()</code> 方法都被标记为需要特定的权限。<code>main</code> 方法中使用 <code>checkPermission</code> 方法来检查权限并执行相应操作。这个示例演示了如何使用自定义注解来实现权限控制。</p> <p><img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/notebook/image-20231101160204080.png" alt="image-20231101160204080"></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/11/28, 15:59:58</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/notebook/pages/bd7716/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java反射</div></a> <a href="/notebook/pages/e69783/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Java泛型</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notebook/pages/bd7716/" class="prev">Java反射</a></span> <span class="next"><a href="/notebook/pages/e69783/">Java泛型</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/notebook/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/notebook/pages/cb9907/"><div>
            RabbitMQ总结
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/notebook/pages/baaf76/"><div>
            LinkedHashMap源码分析
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>03</dd> <dt><a href="/notebook/pages/eacb25/"><div>
            ConcurrentHashMap源码分析
            <!----></div></a> <span class="date">04-25</span></dt></dl> <dl><dd></dd> <dt><a href="/notebook/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="1484311465@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/progressforeverever" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/notebook/assets/js/app.8978aa11.js" defer></script><script src="/notebook/assets/js/2.3295585a.js" defer></script><script src="/notebook/assets/js/43.5b698cbc.js" defer></script>
  </body>
</html>
