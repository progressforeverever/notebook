<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redis实战总结01 | notebook</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/notebook/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="学习笔记">
    <meta name="keywords" content="全栈学习笔记">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/notebook/assets/css/0.styles.306676b6.css" as="style"><link rel="preload" href="/notebook/assets/js/app.8978aa11.js" as="script"><link rel="preload" href="/notebook/assets/js/2.3295585a.js" as="script"><link rel="preload" href="/notebook/assets/js/144.e23e68a5.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.ad0dd013.js"><link rel="prefetch" href="/notebook/assets/js/100.18d762e6.js"><link rel="prefetch" href="/notebook/assets/js/101.df1643fc.js"><link rel="prefetch" href="/notebook/assets/js/102.711fb094.js"><link rel="prefetch" href="/notebook/assets/js/103.df90361a.js"><link rel="prefetch" href="/notebook/assets/js/104.91cc5537.js"><link rel="prefetch" href="/notebook/assets/js/105.5faf1761.js"><link rel="prefetch" href="/notebook/assets/js/106.d4373ca9.js"><link rel="prefetch" href="/notebook/assets/js/107.09e7e977.js"><link rel="prefetch" href="/notebook/assets/js/108.f879ec06.js"><link rel="prefetch" href="/notebook/assets/js/109.d73ab4a7.js"><link rel="prefetch" href="/notebook/assets/js/11.bb942f67.js"><link rel="prefetch" href="/notebook/assets/js/110.df1195c3.js"><link rel="prefetch" href="/notebook/assets/js/111.aad6f628.js"><link rel="prefetch" href="/notebook/assets/js/112.6608ef6c.js"><link rel="prefetch" href="/notebook/assets/js/113.b44d7a9d.js"><link rel="prefetch" href="/notebook/assets/js/114.32d718f1.js"><link rel="prefetch" href="/notebook/assets/js/115.fc120a9e.js"><link rel="prefetch" href="/notebook/assets/js/116.b59b2c90.js"><link rel="prefetch" href="/notebook/assets/js/117.e06a792c.js"><link rel="prefetch" href="/notebook/assets/js/118.81328820.js"><link rel="prefetch" href="/notebook/assets/js/119.8bd5b49e.js"><link rel="prefetch" href="/notebook/assets/js/12.0084f935.js"><link rel="prefetch" href="/notebook/assets/js/120.75e8278b.js"><link rel="prefetch" href="/notebook/assets/js/121.7645aa3b.js"><link rel="prefetch" href="/notebook/assets/js/122.12da3625.js"><link rel="prefetch" href="/notebook/assets/js/123.54772ef5.js"><link rel="prefetch" href="/notebook/assets/js/124.0f435a4e.js"><link rel="prefetch" href="/notebook/assets/js/125.49202e31.js"><link rel="prefetch" href="/notebook/assets/js/126.063c0dc0.js"><link rel="prefetch" href="/notebook/assets/js/127.10aef89a.js"><link rel="prefetch" href="/notebook/assets/js/128.a18fb938.js"><link rel="prefetch" href="/notebook/assets/js/129.52bd3fa2.js"><link rel="prefetch" href="/notebook/assets/js/13.1518aee3.js"><link rel="prefetch" href="/notebook/assets/js/130.94b09c35.js"><link rel="prefetch" href="/notebook/assets/js/131.8e8741cd.js"><link rel="prefetch" href="/notebook/assets/js/132.6039f04a.js"><link rel="prefetch" href="/notebook/assets/js/133.5d5a881e.js"><link rel="prefetch" href="/notebook/assets/js/134.13c96cab.js"><link rel="prefetch" href="/notebook/assets/js/135.84ff1026.js"><link rel="prefetch" href="/notebook/assets/js/136.5be2d64f.js"><link rel="prefetch" href="/notebook/assets/js/137.c13ade8c.js"><link rel="prefetch" href="/notebook/assets/js/138.245b4b27.js"><link rel="prefetch" href="/notebook/assets/js/139.c8ce5977.js"><link rel="prefetch" href="/notebook/assets/js/14.65893aa1.js"><link rel="prefetch" href="/notebook/assets/js/140.162d1bb5.js"><link rel="prefetch" href="/notebook/assets/js/141.f6f6fa8d.js"><link rel="prefetch" href="/notebook/assets/js/142.558f939a.js"><link rel="prefetch" href="/notebook/assets/js/143.bd02ec09.js"><link rel="prefetch" href="/notebook/assets/js/145.ebbca7e4.js"><link rel="prefetch" href="/notebook/assets/js/146.e5c44244.js"><link rel="prefetch" href="/notebook/assets/js/147.9f7ccbfc.js"><link rel="prefetch" href="/notebook/assets/js/148.a367286f.js"><link rel="prefetch" href="/notebook/assets/js/149.04cfb13d.js"><link rel="prefetch" href="/notebook/assets/js/15.94d642c1.js"><link rel="prefetch" href="/notebook/assets/js/150.449a26e9.js"><link rel="prefetch" href="/notebook/assets/js/151.8fd3a27b.js"><link rel="prefetch" href="/notebook/assets/js/152.3b529668.js"><link rel="prefetch" href="/notebook/assets/js/153.fa86f4c0.js"><link rel="prefetch" href="/notebook/assets/js/154.60a24941.js"><link rel="prefetch" href="/notebook/assets/js/155.6d661985.js"><link rel="prefetch" href="/notebook/assets/js/156.b9cc9d16.js"><link rel="prefetch" href="/notebook/assets/js/157.418f5bf3.js"><link rel="prefetch" href="/notebook/assets/js/158.42495e4b.js"><link rel="prefetch" href="/notebook/assets/js/159.c42f7bdc.js"><link rel="prefetch" href="/notebook/assets/js/16.f82ad78e.js"><link rel="prefetch" href="/notebook/assets/js/160.063519a2.js"><link rel="prefetch" href="/notebook/assets/js/161.acf0704e.js"><link rel="prefetch" href="/notebook/assets/js/162.603af965.js"><link rel="prefetch" href="/notebook/assets/js/163.ae82d304.js"><link rel="prefetch" href="/notebook/assets/js/164.23ac592d.js"><link rel="prefetch" href="/notebook/assets/js/165.2b97d44b.js"><link rel="prefetch" href="/notebook/assets/js/166.2318947e.js"><link rel="prefetch" href="/notebook/assets/js/167.c379c56d.js"><link rel="prefetch" href="/notebook/assets/js/168.8d1a7c3a.js"><link rel="prefetch" href="/notebook/assets/js/169.1893572a.js"><link rel="prefetch" href="/notebook/assets/js/17.8ffa6c64.js"><link rel="prefetch" href="/notebook/assets/js/170.2b80b7bd.js"><link rel="prefetch" href="/notebook/assets/js/171.1e896c70.js"><link rel="prefetch" href="/notebook/assets/js/172.5f6aa7cb.js"><link rel="prefetch" href="/notebook/assets/js/173.ea3e6be3.js"><link rel="prefetch" href="/notebook/assets/js/174.2b42017e.js"><link rel="prefetch" href="/notebook/assets/js/175.612d3b13.js"><link rel="prefetch" href="/notebook/assets/js/176.bb131f2a.js"><link rel="prefetch" href="/notebook/assets/js/177.8ec26f15.js"><link rel="prefetch" href="/notebook/assets/js/178.a14f0a09.js"><link rel="prefetch" href="/notebook/assets/js/179.43bc8d77.js"><link rel="prefetch" href="/notebook/assets/js/18.72d19e8c.js"><link rel="prefetch" href="/notebook/assets/js/180.b86fc5fc.js"><link rel="prefetch" href="/notebook/assets/js/181.4682b920.js"><link rel="prefetch" href="/notebook/assets/js/182.d13f6ea1.js"><link rel="prefetch" href="/notebook/assets/js/183.15ae06b7.js"><link rel="prefetch" href="/notebook/assets/js/184.26601145.js"><link rel="prefetch" href="/notebook/assets/js/185.24f2484e.js"><link rel="prefetch" href="/notebook/assets/js/186.9c57a6bd.js"><link rel="prefetch" href="/notebook/assets/js/187.49c1ccaf.js"><link rel="prefetch" href="/notebook/assets/js/188.d36e089d.js"><link rel="prefetch" href="/notebook/assets/js/189.c9c05468.js"><link rel="prefetch" href="/notebook/assets/js/19.9fc8ebe6.js"><link rel="prefetch" href="/notebook/assets/js/190.a3bf651a.js"><link rel="prefetch" href="/notebook/assets/js/191.764e02c7.js"><link rel="prefetch" href="/notebook/assets/js/192.efbc422a.js"><link rel="prefetch" href="/notebook/assets/js/193.2378c3df.js"><link rel="prefetch" href="/notebook/assets/js/194.4c58d88b.js"><link rel="prefetch" href="/notebook/assets/js/195.badf2826.js"><link rel="prefetch" href="/notebook/assets/js/196.b8c6de79.js"><link rel="prefetch" href="/notebook/assets/js/197.d605bd64.js"><link rel="prefetch" href="/notebook/assets/js/198.7f351da5.js"><link rel="prefetch" href="/notebook/assets/js/199.18ac70dc.js"><link rel="prefetch" href="/notebook/assets/js/20.ae5f6787.js"><link rel="prefetch" href="/notebook/assets/js/200.4dc7a625.js"><link rel="prefetch" href="/notebook/assets/js/201.86bc1624.js"><link rel="prefetch" href="/notebook/assets/js/202.46f431ad.js"><link rel="prefetch" href="/notebook/assets/js/203.e422dce0.js"><link rel="prefetch" href="/notebook/assets/js/204.1e8ff98b.js"><link rel="prefetch" href="/notebook/assets/js/205.160f2d88.js"><link rel="prefetch" href="/notebook/assets/js/206.b8bb9eb0.js"><link rel="prefetch" href="/notebook/assets/js/207.2d979a2c.js"><link rel="prefetch" href="/notebook/assets/js/208.57c8bde5.js"><link rel="prefetch" href="/notebook/assets/js/209.34c6c965.js"><link rel="prefetch" href="/notebook/assets/js/21.4d8cf05c.js"><link rel="prefetch" href="/notebook/assets/js/210.5184efc3.js"><link rel="prefetch" href="/notebook/assets/js/211.27b3c43f.js"><link rel="prefetch" href="/notebook/assets/js/212.6ca80d46.js"><link rel="prefetch" href="/notebook/assets/js/213.006099ab.js"><link rel="prefetch" href="/notebook/assets/js/214.01d10125.js"><link rel="prefetch" href="/notebook/assets/js/215.fe553758.js"><link rel="prefetch" href="/notebook/assets/js/216.2451d652.js"><link rel="prefetch" href="/notebook/assets/js/217.10acfce9.js"><link rel="prefetch" href="/notebook/assets/js/22.8847f393.js"><link rel="prefetch" href="/notebook/assets/js/23.38076e6c.js"><link rel="prefetch" href="/notebook/assets/js/24.241b5ba4.js"><link rel="prefetch" href="/notebook/assets/js/25.d555f519.js"><link rel="prefetch" href="/notebook/assets/js/26.5e596b6c.js"><link rel="prefetch" href="/notebook/assets/js/27.2c4bffc6.js"><link rel="prefetch" href="/notebook/assets/js/28.bf68cc5f.js"><link rel="prefetch" href="/notebook/assets/js/29.1850bb08.js"><link rel="prefetch" href="/notebook/assets/js/3.ea1a4511.js"><link rel="prefetch" href="/notebook/assets/js/30.913c71ed.js"><link rel="prefetch" href="/notebook/assets/js/31.8c1368e4.js"><link rel="prefetch" href="/notebook/assets/js/32.ab4a79e6.js"><link rel="prefetch" href="/notebook/assets/js/33.67c2d1e1.js"><link rel="prefetch" href="/notebook/assets/js/34.8d4fe674.js"><link rel="prefetch" href="/notebook/assets/js/35.1dd47348.js"><link rel="prefetch" href="/notebook/assets/js/36.4f00b90e.js"><link rel="prefetch" href="/notebook/assets/js/37.f2f08452.js"><link rel="prefetch" href="/notebook/assets/js/38.85d5f4b1.js"><link rel="prefetch" href="/notebook/assets/js/39.68430cda.js"><link rel="prefetch" href="/notebook/assets/js/4.aa1f4d87.js"><link rel="prefetch" href="/notebook/assets/js/40.a5d1602d.js"><link rel="prefetch" href="/notebook/assets/js/41.f9003dd4.js"><link rel="prefetch" href="/notebook/assets/js/42.b9468304.js"><link rel="prefetch" href="/notebook/assets/js/43.5b698cbc.js"><link rel="prefetch" href="/notebook/assets/js/44.5d66646e.js"><link rel="prefetch" href="/notebook/assets/js/45.d8c25634.js"><link rel="prefetch" href="/notebook/assets/js/46.3a29e957.js"><link rel="prefetch" href="/notebook/assets/js/47.10a47405.js"><link rel="prefetch" href="/notebook/assets/js/48.b7787ca9.js"><link rel="prefetch" href="/notebook/assets/js/49.a435f028.js"><link rel="prefetch" href="/notebook/assets/js/5.a042e532.js"><link rel="prefetch" href="/notebook/assets/js/50.377b1218.js"><link rel="prefetch" href="/notebook/assets/js/51.72238a50.js"><link rel="prefetch" href="/notebook/assets/js/52.d5eeb5ab.js"><link rel="prefetch" href="/notebook/assets/js/53.ad4d5c5e.js"><link rel="prefetch" href="/notebook/assets/js/54.fa68e4d3.js"><link rel="prefetch" href="/notebook/assets/js/55.6758b457.js"><link rel="prefetch" href="/notebook/assets/js/56.f1178984.js"><link rel="prefetch" href="/notebook/assets/js/57.49bfa3ec.js"><link rel="prefetch" href="/notebook/assets/js/58.25693284.js"><link rel="prefetch" href="/notebook/assets/js/59.355865a0.js"><link rel="prefetch" href="/notebook/assets/js/6.744ef3d9.js"><link rel="prefetch" href="/notebook/assets/js/60.3b04c778.js"><link rel="prefetch" href="/notebook/assets/js/61.5c730da5.js"><link rel="prefetch" href="/notebook/assets/js/62.293977a9.js"><link rel="prefetch" href="/notebook/assets/js/63.a1f7d522.js"><link rel="prefetch" href="/notebook/assets/js/64.698160c8.js"><link rel="prefetch" href="/notebook/assets/js/65.2d400d32.js"><link rel="prefetch" href="/notebook/assets/js/66.9e1d1088.js"><link rel="prefetch" href="/notebook/assets/js/67.0a49ac07.js"><link rel="prefetch" href="/notebook/assets/js/68.e278f8bd.js"><link rel="prefetch" href="/notebook/assets/js/69.9ae024f0.js"><link rel="prefetch" href="/notebook/assets/js/7.a8cc7006.js"><link rel="prefetch" href="/notebook/assets/js/70.ecc66a1b.js"><link rel="prefetch" href="/notebook/assets/js/71.6197564c.js"><link rel="prefetch" href="/notebook/assets/js/72.8a51c5a8.js"><link rel="prefetch" href="/notebook/assets/js/73.17b7fc55.js"><link rel="prefetch" href="/notebook/assets/js/74.51c25099.js"><link rel="prefetch" href="/notebook/assets/js/75.4e49385e.js"><link rel="prefetch" href="/notebook/assets/js/76.9b20af8b.js"><link rel="prefetch" href="/notebook/assets/js/77.62682a06.js"><link rel="prefetch" href="/notebook/assets/js/78.b3326b2e.js"><link rel="prefetch" href="/notebook/assets/js/79.69dde82f.js"><link rel="prefetch" href="/notebook/assets/js/8.d3830af8.js"><link rel="prefetch" href="/notebook/assets/js/80.d5950484.js"><link rel="prefetch" href="/notebook/assets/js/81.2dab3637.js"><link rel="prefetch" href="/notebook/assets/js/82.f4d136fc.js"><link rel="prefetch" href="/notebook/assets/js/83.c7d751a8.js"><link rel="prefetch" href="/notebook/assets/js/84.b2645137.js"><link rel="prefetch" href="/notebook/assets/js/85.02ecd4f2.js"><link rel="prefetch" href="/notebook/assets/js/86.6d6d39be.js"><link rel="prefetch" href="/notebook/assets/js/87.dfdc8e09.js"><link rel="prefetch" href="/notebook/assets/js/88.4d5bde3b.js"><link rel="prefetch" href="/notebook/assets/js/89.5b14e392.js"><link rel="prefetch" href="/notebook/assets/js/9.799b4b95.js"><link rel="prefetch" href="/notebook/assets/js/90.c16fd700.js"><link rel="prefetch" href="/notebook/assets/js/91.23c01f88.js"><link rel="prefetch" href="/notebook/assets/js/92.e7a0e511.js"><link rel="prefetch" href="/notebook/assets/js/93.0616815a.js"><link rel="prefetch" href="/notebook/assets/js/94.1cfba720.js"><link rel="prefetch" href="/notebook/assets/js/95.cd76aaad.js"><link rel="prefetch" href="/notebook/assets/js/96.44646498.js"><link rel="prefetch" href="/notebook/assets/js/97.9e696d9d.js"><link rel="prefetch" href="/notebook/assets/js/98.e9f8b933.js"><link rel="prefetch" href="/notebook/assets/js/99.95e727c2.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.306676b6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><img src="/notebook/img/logo.jpg" alt="notebook" class="logo"> <span class="site-name can-hide">notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/Vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><!----> <span class="title" style="display:;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/java/javaSE/" class="nav-link">javaSE</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/maven/" class="nav-link">maven</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringSecurity/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DesignPattern/" class="nav-link">DesignPattern</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DevelopAndReading/" class="nav-link">开发与阅读</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><!----> <span class="title" style="display:;">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/python/pythonFundamentals/" class="nav-link">pythonFundamentals</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/fastAPI/" class="nav-link">fastAPI</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/Flask/" class="nav-link">Flask</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/spider/" class="nav-link">爬虫</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/docker/" class="nav-link">docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库与中间件" class="dropdown-title"><!----> <span class="title" style="display:;">数据库与中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/database/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Elatisearch/" class="nav-link">Elatisearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/foundation/Leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/network/" class="nav-link">计算机网络</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/%E4%BE%A7%E8%BE%B9%E6%A0%8F.jpeg"> <div class="blogger-info"><h3>学习笔记</h3> <span>每个小菜鸡都有变强的梦想</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/javascript/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/notebook/fontEnd/Vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><!----> <span class="title" style="display:;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/java/javaSE/" class="nav-link">javaSE</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/maven/" class="nav-link">maven</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/SpringSecurity/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DesignPattern/" class="nav-link">DesignPattern</a></li><li class="dropdown-item"><!----> <a href="/notebook/java/DevelopAndReading/" class="nav-link">开发与阅读</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><!----> <span class="title" style="display:;">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/python/pythonFundamentals/" class="nav-link">pythonFundamentals</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/fastAPI/" class="nav-link">fastAPI</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/Flask/" class="nav-link">Flask</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/spider/" class="nav-link">爬虫</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/docker/" class="nav-link">docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库与中间件" class="dropdown-title"><!----> <span class="title" style="display:;">数据库与中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/database/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/notebook/database/Elatisearch/" class="nav-link">Elatisearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/foundation/Leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/foundation/network/" class="nav-link">计算机网络</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/pages/a21de6/" class="sidebar-link">redis概述</a></li><li><a href="/notebook/pages/2e3ec9/" class="sidebar-link">java操作redis</a></li><li><a href="/notebook/pages/640270/" aria-current="page" class="active sidebar-link">redis实战总结01</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/notebook/pages/640270/#短信验证码登录" class="sidebar-link">短信验证码登录</a></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/640270/#查询缓存" class="sidebar-link">查询缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/640270/#缓存更新策略" class="sidebar-link">缓存更新策略</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/640270/#数据库缓存同步" class="sidebar-link">数据库缓存同步</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/640270/#缓存穿透" class="sidebar-link">缓存穿透</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/640270/#缓存雪崩" class="sidebar-link">缓存雪崩</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/640270/#缓存击穿" class="sidebar-link">缓存击穿</a></li></ul></li></ul></li><li><a href="/notebook/pages/1658fa/" class="sidebar-link">redis实战总结02</a></li><li><a href="/notebook/pages/3b20cf/" class="sidebar-link">redis实战总结03</a></li><li><a href="/notebook/pages/7e5b52/" class="sidebar-link">redis实战总结04</a></li><li><a href="/notebook/pages/d3df9c/" class="sidebar-link">redis数据持久化</a></li><li><a href="/notebook/pages/1b6c78/" class="sidebar-link">Redis主从同步</a></li><li><a href="/notebook/pages/8b92e8/" class="sidebar-link">Redis哨兵</a></li><li><a href="/notebook/pages/cb780f/" class="sidebar-link">多级缓存</a></li><li><a href="/notebook/pages/a02dcf/" class="sidebar-link">Redis其他</a></li><li><a href="/notebook/pages/eb7266/" class="sidebar-link">Redis常见面试题</a></li><li><a href="/notebook/pages/c62710/" class="sidebar-link">Redis底层数据结构</a></li><li><a href="/notebook/pages/ed5a04/" class="sidebar-link">Redis数据类型及其应用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elatisearch</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/notebook/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/notebook/categories/?category=%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E4%B8%AD%E9%97%B4%E4%BB%B6" title="分类" data-v-06225672>数据库与中间件</a></li><li data-v-06225672><a href="/notebook/categories/?category=Redis" title="分类" data-v-06225672>Redis</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/progressforeverever" target="_blank" title="作者" class="beLink" data-v-06225672>czy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-06</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">redis实战总结01<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="redis实战总结01"><a href="#redis实战总结01" class="header-anchor">#</a> redis实战总结01</h1> <h2 id="短信验证码登录"><a href="#短信验证码登录" class="header-anchor">#</a> 短信验证码登录</h2> <p>验证码  有效期  存在redis中</p> <p>我们需要时刻牢记，redis是个<code>key-value</code>型结构的数据库，key是什么，value是什么。</p> <p>在设计这个key的时候，我们之前讲过需要满足两点</p> <p>1、key要具有唯一性</p> <p>2、key要方便携带</p> <p>同时，在编码的时候，要注意</p> <ul><li>不要硬编码，写个枚举类或者常量</li> <li>反向校验，减少嵌套</li> <li>注意粒度，粒度不要太大</li> <li>隐藏用户敏感信息</li></ul> <h2 id="查询缓存"><a href="#查询缓存" class="header-anchor">#</a> 查询缓存</h2> <p>实际开发中,会构筑多级缓存来使系统运行速度进一步提升,例如:本地缓存与redis中的缓存并发使用</p> <p><strong>浏览器缓存</strong>：主要是存在于浏览器端的缓存</p> <p><strong>应用层缓存</strong>:可以分为tomcat本地缓存，比如之前提到的map，或者是使用redis作为缓存</p> <p><strong>数据库缓存</strong>:在数据库中有一片空间是 buffer pool，增改查数据都会先加载到mysql的缓存中</p> <p><strong>CPU缓存</strong>:当代计算机最大的问题是 cpu性能提升了，但内存读写速度没有跟上，所以为了适应当下的情况，增加了cpu的L1，L2，L3级的缓存</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis04.png"> <p>在查多写少的地方，用缓存那是再好不过了</p> <p>但是缓存也会增加代码复杂度和运营的成本:</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis05.png"> <p><strong>后面基本上都是在围绕着数据一致性的问题来进行展开的</strong></p> <p><code>of course</code>只要涉及到两个的，都会存在同步的问题。</p> <p>基本模型</p> <p>标准的操作方式就是查询数据库之前先查询缓存，如果缓存数据存在，则直接从缓存中返回，如果缓存数据不存在，再查询数据库，然后将数据存入redis。</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis06.png"> <h3 id="缓存更新策略"><a href="#缓存更新策略" class="header-anchor">#</a> 缓存更新策略</h3> <p>缓存更新是redis为了节约内存而设计出来的一个东西，主要是因为内存数据宝贵，当我们向redis插入太多数据，此时就可能会导致缓存中的数据过多，所以redis会对部分数据进行更新，或者把他叫为淘汰更合适。</p> <ul><li><p><strong>内存淘汰</strong>:redis自动进行，当redis内存达到咱们设定的max-memery的时候，会自动触发淘汰机制，淘汰掉一些不重要的数据(可以自己设置策略方式)</p></li> <li><p><strong>超时剔除</strong>:当我们给redis设置了过期时间ttl之后，redis会将超时的数据进行删除，方便咱们继续使用缓存</p></li> <li><p><strong>主动更新</strong>:我们可以手动调用方法把缓存删掉，<strong>通常用于解决缓存和数据库不一致问题</strong></p></li></ul> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis07.png"> <h3 id="数据库缓存同步"><a href="#数据库缓存同步" class="header-anchor">#</a> 数据库缓存同步</h3> <p>由于我们的<strong>缓存的数据源来自于数据库</strong>,而数据库的<strong>数据是会发生变化的</strong>,因此,如果当数据库中<strong>数据发生变化,而缓存却没有同步</strong>,此时就会有<strong>一致性问题存在</strong>。</p> <p>解决方式：</p> <ul><li><p>Cache Aside Pattern <strong>人工编码方式</strong>：缓存调用者在更新完数据库后再去更新缓存，也称之为<strong>双写方案    （大部分还是会采用人工编码方式   毕竟下面两种方式看上去比较复杂）</strong></p></li> <li><p>Read/Write Through Pattern : 由系统本身完成，数据库与缓存的问题交由系统本身去处理</p></li> <li><p>Write Behind Caching Pattern ：调用者只操作缓存，其他线程去异步处理数据库，实现最终一致</p></li></ul> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis08.png"> <p>好的，那么既然采取人工编码的方式，两大问题来了</p> <ul><li><p>删除缓存还是更新缓存？</p></li> <li><p>先操作数据库还是先操作缓存？</p></li> <li><p>更新缓存：每次更新数据库都更新缓存，<strong>无效写操作较多</strong></p></li> <li><p>删除缓存：更新数据库时让缓存失效，查询时再更新缓存</p></li></ul> <p><strong>所以删除缓存</strong></p> <p>如何保证缓存与数据库的操作的同时成功或失败？</p> <ul><li>单体系统，将缓存与数据库操作放在<strong>一个事务</strong></li> <li>分布式系统，利用<strong>TCC等分布式事务方案</strong></li></ul> <p>先操作缓存还是先操作数据库？</p> <p>先来看看删除缓存，在操作数据库的情况</p> <p>这是正常情况</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis09.png"> <p>异常情况</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis10.png"> <p>删完缓存，去更新数据库，然而，<strong>更新数据库是比较耗时的</strong>，这个时候另一个线程来查缓存，未命中，查数据库，写缓存（这个时候是数据库的旧值）为什么这两个操作画在中间呢？查缓存，查数据库，写缓存，<strong>这些都是比较快速的操作</strong>，在数据库更新完成之前完全能做完，<strong>所以这种数据不一致的可能性就比较大   （本质上是删完缓存  更新数据库这之间时间隔得太久了，久是相对的）</strong>。</p> <p>我们再来看看先操作数据库，在更新缓存的情况。</p> <p>这是正常情况：</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis11.png"> <p>异常情况：</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis12.png"> <p>查询缓存直接命中的情况就不说了，这个确实是会导致一定的数据不一致</p> <p>假如之前没有缓存，查缓存未命中，然后查数据库（此时查到的是旧值），然后线程一就去写缓存，<strong>这之间其实是隔得很短的</strong>，在线程一查到旧数据的时候，线程二开始更新数据库，删除缓存，<strong>更新数据库是个耗时操作</strong>，这个耗时很长的时间<strong>要在线程一耗时很短的两个动作之间完成，这种概率就比较低</strong></p> <p>所以综上所述，先操作数据库，在删除缓存的数据不一致的概率更低。</p> <p>因此，<strong>先操作数据库，在删除缓存</strong></p> <h3 id="缓存穿透"><a href="#缓存穿透" class="header-anchor">#</a> 缓存穿透</h3> <p>缓存穿透 ：缓存穿透是指客户端<strong>请求的数据在缓存中和数据库中都不存在</strong>，<strong>这样缓存永远不会生效，这些请求都会打到数据库。</strong></p> <p>常见的解决方案有两种：缓存空对象，布隆过滤</p> <p><strong>缓存空对象思路分析：<strong>当我们客户端访问不存在的数据时，先请求redis，但是此时redis中没有数据，此时会访问到数据库，但是数据库中也没有数据，这个数据</strong>穿透了缓存，直击数据库</strong>，我们都知道数据库能够承载的并发不如redis这么高，如果大量的请求同时过来访问这种不存在的数据，这些请求就都会访问到数据库，简单的解决方案就是哪怕这个数据在数据库中也不存在，我们也把这个数据存入到redis中去，这样，<strong>下次</strong>用户过来访问这个不存在的数据<strong>下次一定是吧!!!万一人家只打一次，那不就寄了</strong>，那么在redis中也能找到这个数据就不会进入到缓存了</p> <p><strong>布隆过滤</strong>：布隆过滤器其实采用的是哈希思想来解决这个问题，通过一个庞大的二进制数组，走哈希思想去判断当前这个要查询的这个数据是否存在，如果布隆过滤器判断存在，则放行，这个请求会去访问redis，哪怕此时redis中的数据过期了，但是数据库中一定存在这个数据，在数据库中查询出来这个数据后，再将其放入到redis中，</p> <p>假设布隆过滤器判断这个数据不存在，则直接返回</p> <p>这种方式优点在于节约内存空间，存在误判，误判原因在于：布隆过滤器走的是哈希思想，只要哈希思想，就可能存在哈希冲突</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis13.png"> <ul><li>缓存空对象
<ul><li>优点：实现简单，维护方便</li> <li>缺点：
<ul><li>额外的内存消耗，而且这样假如对面恶意请求，到时候缓存中存了一堆空对象    <strong>(其实还好？空对象不占内存，然后到时候设置个短的过期时间?)</strong></li> <li>可能造成短期的不一致</li></ul></li></ul></li> <li>布隆过滤
<ul><li>优点：内存占用较少，没有多余key</li> <li>缺点：
<ul><li>实现复杂</li> <li>存在误判可能</li></ul></li></ul></li></ul> <p>缓存穿透产生的原因是什么？</p> <ul><li>用户请求的数据在缓存中和数据库中都不存在，不断发起这样的请求，给数据库带来巨大压力</li></ul> <p>缓存穿透的解决方案有哪些？</p> <ul><li>缓存null值</li> <li>布隆过滤</li> <li><strong>增强id的复杂度</strong>，避免被猜测id规律</li> <li>做好数据的基础格式校验</li> <li>加强用户权限校验</li> <li>做好<strong>热点参数的限流</strong></li></ul> <h3 id="缓存雪崩"><a href="#缓存雪崩" class="header-anchor">#</a> 缓存雪崩</h3> <p>缓存雪崩是指在<strong>同一时段大量的缓存key同时失效</strong>或者<strong>Redis服务宕机</strong>，导致大量请求到达数据库，带来巨大压力。</p> <p>解决方案：</p> <ul><li><strong>给不同的Key的TTL添加随机值    （一般会进行数据预热，先把一定的数据写入缓存中，这个时候就不要全都设置一个ttl，分开来）</strong></li> <li>利用Redis集群提高服务的可用性</li> <li>给缓存业务添加降级限流策略</li> <li>给业务添加多级缓存</li></ul> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis14.png"> <h3 id="缓存击穿"><a href="#缓存击穿" class="header-anchor">#</a> 缓存击穿</h3> <p>缓存击穿问题也叫<strong>热点Key</strong>问题，就是一个<strong>被高并发访问并且缓存</strong>重建业务较复杂的key突然失效了，<strong>无数的请求访问会在瞬间给数据库带来巨大的冲击</strong>。</p> <p>相当于一个高并发访问的key失效了，这样全都压到数据库了</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis15.png"> <p>常见的解决方案有两种：</p> <ul><li>互斥锁</li> <li>逻辑过期</li></ul> <p>解决方案一、使用锁来解决：</p> <p>因为锁能实现互斥性。假设线程过来，只能一个人一个人的来访问数据库，从而避免对于数据库访问压力过大，<strong>但这也会影响查询的性能，因为此时会让查询的性能从并行变成了串行</strong>，我们可以采用tryLock方法 + double check来解决这样的问题。</p> <p>假设现在线程1过来访问，他查询缓存没有命中，但是此时他获得到了锁的资源，那么线程1就会一个人去执行逻辑，假设现在线程2过来，线程2在执行过程中，并没有获得到锁，那么线程2就可以进行到休眠，直到线程1把锁释放后，线程2获得到锁，然后再来执行逻辑，此时就能够从缓存中拿到数据了。</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis16.png"> <p>解决方案二、逻辑过期方案</p> <p>方案分析：我们之所以会出现<strong>这个缓存击穿问题，主要原因是在于我们对key设置了过期时间，假设我们不设置过期时间，其实就不会有缓存击穿的问题，<strong>但是不设置过期时间，这样数据不就一直占用我们内存了吗，我们可以</strong>采用逻辑过期方案。</strong></p> <p>我们把过期时间设置在 redis的value中，注意：这个过期时间并不会直接作用于redis，而是我们后续通过逻辑去处理。假设线程1去查询缓存，然后从value中判断出来当前的数据已经过期了，<strong>此时线程1去获得互斥锁，那么其他线程会进行阻塞</strong>，获得了锁的线程他会开启一个 线程去进行 以前的重构数据的逻辑，<strong>直到新开的线程完成这个逻辑后，才释放锁，</strong> 而线程1直接进行返回，假设现在线程3过来访问，由于线程线程2持有着锁，所以线程3无法获得锁，线程3也直接返回数据，只有等到新开的线程2把重建数据构建完后，其他线程才能走返回正确的数据。</p> <p>这种方案巧妙在于，<strong>异步的构建缓存，缺点在于在构建完缓存之前，返回的都是脏数据。</strong></p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis17.png"> <p>进行对比</p> <ul><li><p><strong>互斥锁方案</strong>:由于保证了互斥性，所以数据一致，<strong>且实现简单</strong>，因为仅仅只需要加一把锁而已，也没其他的事情需要操心，<strong>所以没有额外的内存消耗</strong>，缺点在于有锁就有死锁问题的发生，且只能串行执行性能肯定受到影响</p></li> <li><p><strong>逻辑过期方案：</strong> 线程读取过程中不需要等待，性能好，有一个额外的线程持有锁去进行重构数据，但是在重构数据完成前，其他的线程只能返回之前的数据，且实现起来麻烦</p></li></ul> <h4 id="互斥锁解决缓存击穿"><a href="#互斥锁解决缓存击穿" class="header-anchor">#</a> 互斥锁解决缓存击穿</h4> <p>核心思路：相较于原来从缓存中查询不到数据后直接查询数据库而言，现在的方案是 进行查询之后，如果从缓存没有查询到数据，则进行互斥锁的获取，获取互斥锁后，判断是否获得到了锁，如果没有获得到，<strong>则休眠，过一会再进行尝试，直到获取到锁为止，才能进行查询</strong></p> <p>如果获取到了锁的线程，再去进行查询，查询后将数据写入redis，再释放锁，返回数据，利用互斥锁就能保证只有一个线程去执行操作数据库的逻辑，防止缓存击穿</p> <p><strong>操作锁的代码：</strong></p> <blockquote><p>Q:这里为什么不用synchronize?</p> <p>真的假的，一个setnx就可以？</p></blockquote> <p><strong>核心思路就是利用redis的setnx方法来表示获取锁</strong>，该方法含义是redis中如果没有这个key，则插入成功，返回1，在stringRedisTemplate中返回true，  如果有这个key则插入失败，则返回0，在stringRedisTemplate返回false，我们可以通过true，或者是false，来表示是否有线程成功插入key，成功插入的key的线程我们认为他就是获得到锁的线程。</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis18.png"> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Boolean</span> flag <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">BooleanUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>操作代码：</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token class-name">Shop</span> <span class="token function">queryWithMutex</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token constant">CACHE_SHOP_KEY</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
        <span class="token comment">// 1、从redis中查询商铺缓存</span>
        <span class="token class-name">String</span> shopJson <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2、判断是否存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>shopJson<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 存在,直接返回</span>
            <span class="token keyword">return</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>shopJson<span class="token punctuation">,</span> <span class="token class-name">Shop</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//判断命中的值是否是空值</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shopJson <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//返回一个错误信息</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 4.实现缓存重构</span>
        <span class="token comment">//4.1 获取互斥锁</span>
        <span class="token class-name">String</span> lockKey <span class="token operator">=</span> <span class="token string">&quot;lock:shop:&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
        <span class="token class-name">Shop</span> shop <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
     
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">boolean</span> isLock <span class="token operator">=</span> <span class="token function">tryLock</span><span class="token punctuation">(</span>lockKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 4.2 判断否获取成功</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isLock<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//4.3 失败，则休眠重试</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token function">queryWithMutex</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//4.4 成功，根据id查询数据库</span>
             shop <span class="token operator">=</span> <span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 5.不存在，返回错误</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>shop <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                 <span class="token comment">//将空值写入redis</span>
                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token constant">CACHE_NULL_TTL</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//返回错误信息</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//6.写入redis</span>
            stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>shop<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">CACHE_NULL_TTL</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//7.释放互斥锁</span>
            <span class="token function">unlock</span><span class="token punctuation">(</span>lockKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     
        <span class="token keyword">return</span> shop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h4 id="逻辑过期解决缓存击穿"><a href="#逻辑过期解决缓存击穿" class="header-anchor">#</a> 逻辑过期解决缓存击穿</h4> <p>思路分析：当用户开始查询redis时，判断是否命中，如果没有命中则直接返回空数据，不查询数据库，而一旦命中后，将value取出，判断value中的过期时间是否满足，如果没有过期，则直接返回redis中的数据，如果过期，则在开启独立线程后直接返回之前的数据，独立线程去重构数据，重构完成后释放互斥锁。</p> <img src="https://czynotebook.oss-cn-beijing.aliyuncs.com/redis19.png"> <p><strong>ShopServiceImpl</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ExecutorService</span> <span class="token constant">CACHE_REBUILD_EXECUTOR</span> <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">Shop</span> <span class="token function">queryWithLogicalExpire</span><span class="token punctuation">(</span> <span class="token class-name">Long</span> id <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token constant">CACHE_SHOP_KEY</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
    <span class="token comment">// 1.从redis查询商铺缓存</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.判断是否存在</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 3.存在，直接返回</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 4.命中，需要先把json反序列化为对象</span>
    <span class="token class-name">RedisData</span> redisData <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">RedisData</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Shop</span> shop <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span> redisData<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Shop</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LocalDateTime</span> expireTime <span class="token operator">=</span> redisData<span class="token punctuation">.</span><span class="token function">getExpireTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5.判断是否过期</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>expireTime<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 5.1.未过期，直接返回店铺信息</span>
        <span class="token keyword">return</span> shop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 5.2.已过期，需要缓存重建</span>
    <span class="token comment">// 6.缓存重建</span>
    <span class="token comment">// 6.1.获取互斥锁</span>
    <span class="token class-name">String</span> lockKey <span class="token operator">=</span> <span class="token constant">LOCK_SHOP_KEY</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> isLock <span class="token operator">=</span> <span class="token function">tryLock</span><span class="token punctuation">(</span>lockKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 6.2.判断是否获取锁成功</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isLock<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token constant">CACHE_REBUILD_EXECUTOR</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>

            <span class="token keyword">try</span><span class="token punctuation">{</span>
                <span class="token comment">//重建缓存</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveShop2Redis</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token number">20L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token function">unlock</span><span class="token punctuation">(</span>lockKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 6.4.返回过期的商铺信息</span>
    <span class="token keyword">return</span> shop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/09/18, 21:30:41</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/notebook/pages/2e3ec9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">java操作redis</div></a> <a href="/notebook/pages/1658fa/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">redis实战总结02</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notebook/pages/2e3ec9/" class="prev">java操作redis</a></span> <span class="next"><a href="/notebook/pages/1658fa/">redis实战总结02</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/notebook/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/notebook/pages/cb9907/"><div>
            RabbitMQ总结
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/notebook/pages/baaf76/"><div>
            LinkedHashMap源码分析
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>03</dd> <dt><a href="/notebook/pages/eacb25/"><div>
            ConcurrentHashMap源码分析
            <!----></div></a> <span class="date">04-25</span></dt></dl> <dl><dd></dd> <dt><a href="/notebook/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="1484311465@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/progressforeverever" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/notebook/assets/js/app.8978aa11.js" defer></script><script src="/notebook/assets/js/2.3295585a.js" defer></script><script src="/notebook/assets/js/144.e23e68a5.js" defer></script>
  </body>
</html>
